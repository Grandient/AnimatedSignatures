(this["webpackJsonp2d-writer"]=this["webpackJsonp2d-writer"]||[]).push([[0],{103:function(e,t,a){},275:function(e,t,a){},277:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),l=a(97),s=a.n(l),r=(a(103),a(14)),o=a(28),c=a(3),h=a(4),d=a(10),u=a(6),p=a(5),v=a(13),f=a(61),g=a(22);function m(e,t,a,n,i){return function(e,t,a){return Math.max(Math.min(e,a),t)}(function(e,t,a,n,i){return n+(e-t)/(a-t)*(i-n)}(e,t,a,n,i),n,i)}function k(e,t){var a=0,n=t*e.total,i=0;console.log(e.children),g.a.each(e.children,(function(t){var l=e.distances[a],s=i+l,r=m(n,i,s,0,1);t.ending=r,i=s,a++}))}function b(e,t,a){t.index=0;var n=a.makeLinearGradient(a.width/2,-a.height/2,a.width/2,a.height/2,new v.a.Stop(0,t[0]),new v.a.Stop(.5,t[1]),new v.a.Stop(1,t[2]));return e.fill=n,e}var y=a(1),w=a.n(y),E=a(60),S=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleClick=function(){n.setState({displayColorPicker:!n.state.displayColorPicker})},n.handleClose=function(){n.setState({displayColorPicker:!1})},n.handleChange=function(e){n.setState({color:e.hex})},n.state={displayColorPicker:!1},n}return Object(h.a)(a,[{key:"render",value:function(){var e=w()({default:{color:{width:"36px",height:"14px",borderRadius:"2px",background:this.props.color},swatch:{padding:"5px",background:"#fff",borderRadius:"1px",boxShadow:"0 0 0 1px rgba(0,0,0,.1)",display:"inline-block",cursor:"pointer"},popover:{position:"absolute",zIndex:"2"},cover:{position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}}});return i.a.createElement("div",{id:this.props.id},i.a.createElement("div",{style:e.swatch,onClick:this.handleClick},i.a.createElement("div",{style:e.color})),this.state.displayColorPicker?i.a.createElement("div",{style:e.popover},i.a.createElement("div",{style:e.cover,onClick:this.handleClose}),i.a.createElement(E.SketchPicker,{color:this.props.color,onChange:this.props.handlechange})):null)}}]),a}(i.a.Component),C=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){return Object(c.a)(this,a),t.call(this,e)}return Object(h.a)(a,[{key:"render",value:function(){var e,t=null;return e=i.a.createElement("div",null,i.a.createElement("label",null,"Background: Gradient"),i.a.createElement("input",{type:"checkbox",onClick:this.props.check,id:"checkbg"})),t=this.props.isGradient?i.a.createElement("div",{style:{display:"flex"}},"Gradient Color:",i.a.createElement(S,{color:this.props.grad[0],handlechange:this.props.colorChange,id:"grad0"}),i.a.createElement(S,{color:this.props.grad[1],handlechange:this.props.colorChange,id:"grad1"}),i.a.createElement(S,{color:this.props.grad[2],handlechange:this.props.colorChange,id:"grad2"})):i.a.createElement("div",{style:{display:"flex"}},"Solid Color:",i.a.createElement(S,{color:this.props.solid,handlechange:this.props.colorChange,id:"solid"})),i.a.createElement("div",null,e,t)}}]),a}(i.a.Component),j=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){return Object(c.a)(this,a),t.call(this,e)}return Object(h.a)(a,[{key:"render",value:function(){return i.a.createElement("div",{id:"fontinput"},i.a.createElement("label",{htmlFor:"file"},"Upload Font:"),i.a.createElement("input",{type:"file",id:"file",name:"file",onChange:this.props.onchange}))}}]),a}(i.a.Component),O=a(23),x=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){return Object(c.a)(this,a),t.call(this,e)}return Object(h.a)(a,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("div",null,"Icons:"),i.a.createElement("div",{id:"iconsvg"},i.a.createElement(O.d,{onClick:this.props.svgClick,size:32}),i.a.createElement(O.b,{onClick:this.props.svgClick,size:32}),i.a.createElement(O.c,{onClick:this.props.svgClick,size:32}),i.a.createElement(O.e,{onClick:this.props.svgClick,size:32}),i.a.createElement(O.a,{onClick:this.props.svgClick,size:32})))}}]),a}(i.a.Component),G=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){return Object(c.a)(this,a),t.call(this,e)}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=new v.a({type:v.a.Types.svg,fullscreen:!1,width:400,height:32}),t=document.getElementById("shapes");e.appendTo(t);var a=e.makeCircle(16,16,15),n=e.makeRectangle(48,16,31,31),i=e.makeLine(64,16,96,16);i.linewidth=8;var l=e.makeStar(112,16,32,16,5),s=e.makeRoundedRectangle(144,16,31,31),r=e.makePolygon(176,16,16,5),o=e.makePolygon(208,16,16,6);e.makeGroup(a,n,i,l,s,r,o).fill="black",e.update()}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("div",null,"Shapes:"),i.a.createElement("div",{id:"shapes",onClick:this.props.onclick}))}}]),a}(i.a.Component),B=(i.a.Component,function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){return Object(c.a)(this,a),t.call(this,e)}return Object(h.a)(a,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("div",null,"History:"),i.a.createElement("button",{onClick:this.props.onclick},"Undo"))}}]),a}(i.a.Component)),V=(a(275),a(276),null),P=0,F=null,R=new v.a.Group;function T(e,t){var a=document.createElementNS("http://www.w3.org/2000/svg","svg"),n=e.getPath(t,0,150,100);n=n.toSVG();var i=(new DOMParser).parseFromString(n,"text/xml");return i=i.firstChild,a.appendChild(i),{svg:a,path:i}}var M=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var n,i;return Object(c.a)(this,a),(i=t.call(this,e)).state=(n={text:"null",svg:null,font:null,t:0,isGradient:!1,grad:["#ff4040","#ff8000","#00c8ff"],solid:"#AB2567",rectangle:null,points:[],loaded:!1,hide:!1,selectedSVG:null},Object(o.a)(n,"svg",null),Object(o.a)(n,"shape",null),n),i.updateText=i.updateText.bind(Object(d.a)(i)),i.updateFont=i.updateFont.bind(Object(d.a)(i)),i.updateBG=i.updateBG.bind(Object(d.a)(i)),i.updateColorState=i.updateColorState.bind(Object(d.a)(i)),i.updateHide=i.updateHide.bind(Object(d.a)(i)),i.selectShape=i.selectShape.bind(Object(d.a)(i)),i.setSVG=i.setSVG.bind(Object(d.a)(i)),i.removePoints=i.removePoints.bind(Object(d.a)(i)),i.svgClick=i.svgClick.bind(Object(d.a)(i)),i.draw=i.draw.bind(Object(d.a)(i)),i}return Object(h.a)(a,[{key:"componentDidMount",value:function(){V=new v.a({type:v.a.Types.svg,fullscreen:!0});var e=document.getElementById("drawingBoard");V.appendTo(e);var t=this;V.bind("resize",(function(){R.translation.set(V.width/2,V.height/2),t.renderBG(),t.instantDraw()})),(F=V.makeRectangle(V.width/2,V.height/2,V.width,V.height)).noStroke(),F.fill=this.state.solid,f.a.load("https://opentype.js.org/fonts/FiraSansMedium.woff",(function(e,a){e?console.log("Font could not be loaded: "+e):(t.state.font=a,t.draw())}))}},{key:"renderBG",value:function(){(F=V.makeRectangle(V.width/2,V.height/2,V.width,V.height)).noStroke(),this.state.isGradient?F=b(F,this.state.grad,V):F.fill=this.state.solid}},{key:"instantDraw",value:function(){if(null!=this.state.font&&null!=this.state.text){V.unbind("update");var e=T(this.state.font,this.state.text);(R=V.interpret(e)).noFill(),R.center(),R.translation.set(V.width/2,V.height/2),R.stroke="white",R.linewidth=1}}},{key:"draw",value:function(){null!=R&&(V.unbind("update"),null!=R.distances&&k(R,0),P=0,V.clear(),this.renderBG());var e,t=T(this.state.font,this.state.text).svg;if(this.state.points.length>=1)for(var a=this.state.points,n=0;n<a.length;n++){var i=a[n];i=i.svg;var l=document.getElementById(i.id),s=V.interpret(l);s.translation.set(a[n].x,a[n].y),s.noFill(),s.stroke="white",s.linewidth=1}(R=V.interpret(t)).noFill(),R.center(),R.translation.set(V.width/2,V.height/2),R.stroke="black",R.linewidth=2,R.distances=(e=R,g.a.map(e.children,(function(e){var t,a=0;return g.a.each(e.vertices,(function(e,n){n>0&&(a+=t.distanceTo(e)),t=e})),a}))),R.total=0,g.a.each(R.distances,(function(e){R.total+=e})),function(e,t){e.translation.set(t.width/2,t.height/2)}(R,V),V.bind("update",(function(){P<.9999?P+=.00625:V.unbind("update"),k(R,P)})),V.play()}},{key:"updateText",value:function(e){void 0!=e&&(e=e.nativeEvent,this.setState(Object(r.a)(Object(r.a)({},this.state),{},{text:e.target.value})))}},{key:"updateFont",value:function(e){var t=(e=e.nativeEvent).target.files[0],a=new FileReader;a.onload=function(e){try{var t=f.a.parse(e.target.result);this.setState(Object(r.a)(Object(r.a)({},this.state),{},{font:t}))}catch(a){console.log(a)}}.bind(this),a.readAsArrayBuffer(t)}},{key:"updateColorState",value:function(e,t){if((F=V.makeRectangle(V.width/2,V.height/2,V.width,V.height)).noStroke(),this.state.isGradient){if("nativeEvent"in t&&(t=t.nativeEvent),void 0!=t){for(var a=null,n=0;n<t.path.length;n++){if(t.path[n].hasAttribute("id")){a=t.path[n].id;break}}var i=0;switch(a){case"grad0":i=0;break;case"grad1":i=1;break;case"grad2":i=2;break;default:return console.log("error"),void console.log(t)}var l=this.state.grad;l[i]=e.hex,this.setState({grad:l})}F=b(F,this.state.grad,V)}else this.setState(Object(r.a)(Object(r.a)({},this.state),{},{solid:e.hex})),F.fill=this.state.solid}},{key:"updateBG",value:function(){(F=V.makeRectangle(V.width/2,V.height/2,V.width,V.height)).noStroke(),this.state.isGradient?(this.setState(Object(r.a)(Object(r.a)({},this.state),{},{isGradient:!1})),F.fill=this.state.solid):(this.setState(Object(r.a)(Object(r.a)({},this.state),{},{isGradient:!0})),F=b(F,this.state.grad,V))}},{key:"updateHide",value:function(){this.state.hide?this.setState({hide:!1}):this.setState({hide:!0})}},{key:"svgClick",value:function(e){e=e.nativeEvent;for(var t=null,a=0;a<e.path.length;a++){if("svg"==e.path[a].nodeName){t=e.path[a];break}}for(var n=document.getElementById("iconsvg").children,i=0;i<n.length;i++){var l=n[i];l==t?l!=this.state.selectedSVG?(l.style.fill="blue",this.setState({selectedSVG:t}),this.removeShape()):(l.style.fill="black",this.setState({selectedSVG:null})):l.style.fill="black"}}},{key:"setSVG",value:function(e){if(null!=this.state.selectedSVG){var t,a=e.clientX,n=e.clientY,i=this.state.points;t=function(e,t,a){if(null!=e)return(e=V.interpret(e)).noFill(),e.scale=.25,e.center(),e.translation.set(t,a),e.stroke="white",e.linewidth=1,e}(this.state.selectedSVG,a,n),i.push({x:a,y:n,svg:t}),this.setState({points:i})}else if(null!=this.state.shape){var l=e.clientX,s=e.clientY,r=this.state.shape;(r=V.interpret(r)).translation.set(l,s);var o=this.state.points;o.push({x:l,y:s,svg:r}),this.setState({points:o})}else console.log("empty")}},{key:"selectShape",value:function(e){if("path"==e.nativeEvent.path[0].nodeName){var t=e.nativeEvent.path[0];if(null==this.state.shape)t.style.fill="blue",t.style.stroke="blue",this.setState({shape:t}),this.removeSVG();else if(this.state.shape==t)t.style.fill="black",t.style.stroke="black",this.setState({shape:null});else{var a=this.state.shape;a.style.fill="black",a.style.stroke="black",t.style.fill="blue",t.style.stroke="blue",this.setState({shape:t}),this.removeSVG()}}}},{key:"removeSVG",value:function(){this.state.selectedSVG&&(this.state.selectedSVG.style.fill="black",this.setState({selectedSVG:null}))}},{key:"removeShape",value:function(){if(this.state.shape){var e=this.state.shape;e.style.fill="black",e.style.stroke="black",this.setState({shape:null})}}},{key:"removePoints",value:function(){if(this.state.points.length>=1){this.state.points[this.state.points.length-1].svg.remove();var e=this.state.points;e.pop(),this.setState({point:e})}}},{key:"render",value:function(){if(this.state.hide){return i.a.createElement("div",null,i.a.createElement("div",{id:"form",className:"center small"},i.a.createElement("button",{id:"draw",onClick:this.draw},"Draw"),i.a.createElement("button",{id:"hide",onClick:this.updateHide},"Show")),i.a.createElement("div",{id:"drawingBoard",onClick:this.setSVG}))}return i.a.createElement("div",null,i.a.createElement("div",{id:"form",className:"flex-col",onContextMenu:this.removePoints},i.a.createElement("div",null,i.a.createElement("label",null,"Choose Text:"),i.a.createElement("input",{id:"textin",type:"text",onChange:this.updateText})),i.a.createElement(j,{onchange:this.updateFont}),i.a.createElement(C,{isGradient:this.state.isGradient,check:this.updateBG,grad:this.state.grad,solid:this.state.solid,colorChange:this.updateColorState}),i.a.createElement(G,{onclick:this.selectShape}),i.a.createElement(x,{svgClick:this.svgClick}),i.a.createElement(B,{onclick:this.removePoints}),i.a.createElement("div",{className:"center"},i.a.createElement("button",{id:"draw",onClick:this.draw},"Draw"),i.a.createElement("button",{id:"hide",onClick:this.updateHide},"Hide"))),i.a.createElement("div",{id:"drawingBoard",onClick:this.setSVG}))}}]),a}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(M,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},41:function(e,t){},98:function(e,t,a){e.exports=a(277)}},[[98,1,2]]]);
//# sourceMappingURL=main.c2dafc2a.chunk.js.map